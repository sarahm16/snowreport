{"version":3,"file":"msal-react.cjs.development.js","sources":["../src/MsalContext.ts","../src/utils/utilities.ts","../src/packageMetadata.ts","../src/MsalProvider.tsx","../src/hooks/useMsal.ts","../src/hooks/useAccount.ts","../src/hooks/useIsAuthenticated.ts","../src/components/AuthenticatedTemplate.tsx","../src/components/UnauthenticatedTemplate.tsx","../src/hooks/useMsalAuthentication.ts","../src/components/MsalAuthenticationTemplate.tsx","../src/components/withMsal.tsx"],"sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport * as React from \"react\";\r\nimport { IPublicClientApplication, stubbedPublicClientApplication, Logger, InteractionStatus, AccountInfo } from \"@azure/msal-browser\";\r\n\r\nexport interface IMsalContext {\r\n    instance: IPublicClientApplication;\r\n    inProgress: InteractionStatus;\r\n    accounts: AccountInfo[];\r\n    logger: Logger;\r\n}\r\n\r\n/*\r\n * Stubbed context implementation\r\n * Only used when there is no provider, which is an unsupported scenario\r\n */\r\nconst defaultMsalContext: IMsalContext = {\r\n    instance: stubbedPublicClientApplication,\r\n    inProgress: InteractionStatus.None,\r\n    accounts: [],\r\n    logger: new Logger({})\r\n};\r\n\r\nexport const MsalContext = React.createContext<IMsalContext>(\r\n    defaultMsalContext\r\n);\r\nexport const MsalConsumer = MsalContext.Consumer;\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { AccountIdentifiers } from \"../types/AccountIdentifiers\";\r\n\r\ntype FaaCFunction = <T>(args: T) => React.ReactNode;\r\n\r\nexport function getChildrenOrFunction<T>(\r\n    children: React.ReactNode | FaaCFunction,\r\n    args: T\r\n): React.ReactNode {\r\n    if (typeof children === \"function\") {\r\n        return children(args);\r\n    }\r\n    return children;\r\n}\r\n\r\n/*\r\n * Utility types\r\n * Reference: https://github.com/piotrwitek/utility-types\r\n */\r\ntype SetDifference<A, B> = A extends B ? never : A;\r\ntype SetComplement<A, A1 extends A> = SetDifference<A, A1>;\r\nexport type Subtract<T extends T1, T1 extends object> = Pick<T,SetComplement<keyof T, keyof T1>>;\r\n\r\n/**\r\n * Helper function to determine whether 2 arrays are equal\r\n * Used to avoid unnecessary state updates\r\n * @param arrayA \r\n * @param arrayB \r\n */\r\nexport function accountArraysAreEqual(arrayA: Array<AccountIdentifiers>, arrayB: Array<AccountIdentifiers>): boolean {\r\n    if (arrayA.length !== arrayB.length) {\r\n        return false;\r\n    }\r\n\r\n    const comparisonArray = [...arrayB];\r\n\r\n    return arrayA.every((elementA) => {\r\n        const elementB = comparisonArray.shift();\r\n        if (!elementA || !elementB) {\r\n            return false;\r\n        }\r\n\r\n        return (elementA.homeAccountId === elementB.homeAccountId) && \r\n               (elementA.localAccountId === elementB.localAccountId) &&\r\n               (elementA.username === elementB.username);\r\n    });\r\n}\r\n","/* eslint-disable header/header */\r\nexport const name = \"@azure/msal-react\";\r\nexport const version = \"1.1.0\";\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport React, { useState, useEffect, useRef, PropsWithChildren, useMemo } from \"react\";\r\nimport {\r\n    IPublicClientApplication,\r\n    EventType,\r\n    EventMessage,\r\n    EventMessageUtils,\r\n    InteractionStatus,\r\n    Logger,\r\n    WrapperSKU,\r\n    AccountInfo\r\n} from \"@azure/msal-browser\";\r\nimport { MsalContext, IMsalContext } from \"./MsalContext\";\r\nimport { accountArraysAreEqual } from \"./utils/utilities\";\r\nimport { name as SKU, version } from \"./packageMetadata\";\r\n\r\nexport type MsalProviderProps = PropsWithChildren<{\r\n    instance: IPublicClientApplication;\r\n}>;\r\n\r\nexport function MsalProvider({instance, children}: MsalProviderProps): React.ReactElement {\r\n    useEffect(() => {\r\n        instance.initializeWrapperLibrary(WrapperSKU.React, version);\r\n    }, [instance]);\r\n    // Create a logger instance for msal-react with the same options as PublicClientApplication\r\n    const logger: Logger = useMemo(() => {\r\n        return instance.getLogger().clone(SKU, version);\r\n    }, [instance]);\r\n\r\n    // State hook to store accounts\r\n    const [accounts, setAccounts] = useState<AccountInfo[]>([]);\r\n    // State hook to store in progress value\r\n    const [inProgress, setInProgress] = useState<InteractionStatus>(InteractionStatus.Startup);\r\n    // Mutable object used in the event callback\r\n    const inProgressRef = useRef(inProgress);\r\n    \r\n    useEffect(() => {\r\n        const callbackId = instance.addEventCallback((message: EventMessage) => {\r\n            switch (message.eventType) {\r\n                case EventType.ACCOUNT_ADDED:\r\n                case EventType.ACCOUNT_REMOVED:\r\n                case EventType.LOGIN_SUCCESS:\r\n                case EventType.SSO_SILENT_SUCCESS:\r\n                case EventType.HANDLE_REDIRECT_END:\r\n                case EventType.LOGIN_FAILURE:\r\n                case EventType.SSO_SILENT_FAILURE:\r\n                case EventType.LOGOUT_END:\r\n                case EventType.ACQUIRE_TOKEN_SUCCESS:\r\n                case EventType.ACQUIRE_TOKEN_FAILURE:\r\n                    const currentAccounts = instance.getAllAccounts();\r\n                    if (!accountArraysAreEqual(currentAccounts, accounts)) {\r\n                        logger.info(\"MsalProvider - updating account state\");\r\n                        setAccounts(currentAccounts);\r\n                    } else {\r\n                        logger.info(\"MsalProvider - no account changes\");\r\n                    }\r\n                    break;\r\n            }\r\n        });\r\n        logger.verbose(`MsalProvider - Registered event callback with id: ${callbackId}`);\r\n\r\n        return () => {\r\n            // Remove callback when component unmounts or accounts change\r\n            if (callbackId) {\r\n                logger.verbose(`MsalProvider - Removing event callback ${callbackId}`);\r\n                instance.removeEventCallback(callbackId);\r\n            }\r\n        };\r\n    }, [instance, accounts, logger]);\r\n\r\n    useEffect(() => {\r\n        const callbackId = instance.addEventCallback((message: EventMessage) => {\r\n            const status = EventMessageUtils.getInteractionStatusFromEvent(message, inProgressRef.current);\r\n            if (status !== null) {\r\n                logger.info(`MsalProvider - ${message.eventType} results in setting inProgress from ${inProgressRef.current} to ${status}`);\r\n                inProgressRef.current = status;\r\n                setInProgress(status);\r\n            }\r\n        });\r\n        logger.verbose(`MsalProvider - Registered event callback with id: ${callbackId}`);\r\n\r\n        instance.handleRedirectPromise().catch(() => {\r\n            // Errors should be handled by listening to the LOGIN_FAILURE event\r\n            return;\r\n        });\r\n\r\n        return () => {\r\n            if (callbackId) {\r\n                logger.verbose(`MsalProvider - Removing event callback ${callbackId}`);\r\n                instance.removeEventCallback(callbackId);\r\n            }\r\n        };\r\n    }, [instance, logger]);\r\n\r\n    const contextValue: IMsalContext = {\r\n        instance,\r\n        inProgress,\r\n        accounts,\r\n        logger\r\n    };\r\n\r\n    return (\r\n        <MsalContext.Provider value={contextValue}>\r\n            {children}\r\n        </MsalContext.Provider>\r\n    );\r\n}\r\n\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { useContext } from \"react\";\r\nimport { IMsalContext, MsalContext } from \"../MsalContext\";\r\n\r\n/**\r\n * Returns Msal Context values\r\n */\r\nexport const useMsal = (): IMsalContext => useContext(MsalContext);\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { AccountInfo, IPublicClientApplication, InteractionStatus, AccountEntity } from \"@azure/msal-browser\";\r\nimport { useMsal } from \"./useMsal\";\r\nimport { AccountIdentifiers } from \"../types/AccountIdentifiers\";\r\n\r\nfunction getAccount(instance: IPublicClientApplication, accountIdentifiers: AccountIdentifiers): AccountInfo | null {\r\n    const allAccounts = instance.getAllAccounts();\r\n    if (allAccounts.length > 0 && (accountIdentifiers.homeAccountId || accountIdentifiers.localAccountId || accountIdentifiers.username)) {\r\n        const matchedAccounts = allAccounts.filter(accountObj => {\r\n            if (accountIdentifiers.username && accountIdentifiers.username.toLowerCase() !== accountObj.username.toLowerCase()) {\r\n                return false;\r\n            }\r\n            if (accountIdentifiers.homeAccountId && accountIdentifiers.homeAccountId.toLowerCase() !== accountObj.homeAccountId.toLowerCase()) {\r\n                return false;\r\n            }\r\n            if (accountIdentifiers.localAccountId && accountIdentifiers.localAccountId.toLowerCase() !== accountObj.localAccountId.toLowerCase()) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        });\r\n\r\n        return matchedAccounts[0] || null;\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Given 1 or more accountIdentifiers, returns the Account object if the user is signed-in\r\n * @param accountIdentifiers \r\n */\r\nexport function useAccount(accountIdentifiers: AccountIdentifiers): AccountInfo | null {\r\n    const { instance, inProgress } = useMsal();\r\n\r\n    const initialStateValue = inProgress === InteractionStatus.Startup ? null : getAccount(instance, accountIdentifiers);\r\n    const [account, setAccount] = useState<AccountInfo|null>(initialStateValue);\r\n\r\n    useEffect(() => {\r\n        const currentAccount = getAccount(instance, accountIdentifiers);\r\n        if (!AccountEntity.accountInfoIsEqual(account, currentAccount, true)) {\r\n            setAccount(currentAccount);\r\n        }\r\n    }, [inProgress, accountIdentifiers, instance, account]);\r\n\r\n    return account;\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useMsal } from \"./useMsal\";\r\nimport { AccountIdentifiers } from \"../types/AccountIdentifiers\";\r\nimport { useAccount } from \"./useAccount\";\r\nimport { AccountInfo, InteractionStatus } from \"@azure/msal-browser\";\r\n\r\nfunction isAuthenticated(allAccounts: AccountIdentifiers[], account: AccountInfo | null, matchAccount?: AccountIdentifiers): boolean {\r\n    if(matchAccount && (matchAccount.username || matchAccount.homeAccountId || matchAccount.localAccountId)) {\r\n        return !!account;\r\n    }   \r\n\r\n    return allAccounts.length > 0;\r\n}\r\n\r\n/**\r\n * Returns whether or not a user is currently signed-in. Optionally provide 1 or more accountIdentifiers to determine if a specific user is signed-in\r\n * @param matchAccount \r\n */\r\nexport function useIsAuthenticated(matchAccount?: AccountIdentifiers): boolean {\r\n    const { accounts: allAccounts, inProgress } = useMsal();\r\n    const account = useAccount(matchAccount || {});\r\n\r\n    const initialStateValue = inProgress === InteractionStatus.Startup ? false : isAuthenticated(allAccounts, account, matchAccount);\r\n    const [hasAuthenticated, setHasAuthenticated] = useState<boolean>(initialStateValue);\r\n\r\n    useEffect(() => {\r\n        setHasAuthenticated(isAuthenticated(allAccounts, account, matchAccount));\r\n    }, [allAccounts, account, matchAccount]);\r\n\r\n    return hasAuthenticated;\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport React, { PropsWithChildren, useMemo } from \"react\";\r\nimport { AccountIdentifiers } from \"../types/AccountIdentifiers\";\r\nimport { getChildrenOrFunction } from \"../utils/utilities\";\r\nimport { useMsal } from \"../hooks/useMsal\";\r\nimport { useIsAuthenticated } from \"../hooks/useIsAuthenticated\";\r\nimport { InteractionStatus } from \"@azure/msal-browser\";\r\n\r\nexport type AuthenticatedTemplateProps = PropsWithChildren<AccountIdentifiers>;\r\n\r\n/**\r\n * Renders child components if user is authenticated\r\n * @param props \r\n */\r\nexport function AuthenticatedTemplate({ username, homeAccountId, localAccountId, children }: AuthenticatedTemplateProps): React.ReactElement|null {\r\n    const context = useMsal();\r\n    const accountIdentifier: AccountIdentifiers = useMemo(() => {\r\n        return {\r\n            username,\r\n            homeAccountId,\r\n            localAccountId\r\n        };\r\n    }, [username, homeAccountId, localAccountId]);\r\n    const isAuthenticated = useIsAuthenticated(accountIdentifier);\r\n\r\n    if (isAuthenticated && context.inProgress !== InteractionStatus.Startup) {\r\n        return (\r\n            <React.Fragment>\r\n                {getChildrenOrFunction(children, context)}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n    return null;\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport React, { PropsWithChildren, useMemo } from \"react\";\r\nimport { useMsal } from \"../hooks/useMsal\";\r\nimport { useIsAuthenticated } from \"../hooks/useIsAuthenticated\";\r\nimport { getChildrenOrFunction } from \"../utils/utilities\";\r\nimport { AccountIdentifiers } from \"../types/AccountIdentifiers\";\r\nimport { InteractionStatus } from \"@azure/msal-browser\";\r\n\r\nexport type UnauthenticatedTemplateProps = PropsWithChildren<AccountIdentifiers>;\r\n\r\n/**\r\n * Renders child components if user is unauthenticated\r\n * @param props \r\n */\r\nexport function UnauthenticatedTemplate({ username, homeAccountId, localAccountId, children }: UnauthenticatedTemplateProps): React.ReactElement|null {\r\n    const context = useMsal();\r\n    const accountIdentifier: AccountIdentifiers = useMemo(() => {\r\n        return {\r\n            username,\r\n            homeAccountId,\r\n            localAccountId\r\n        };\r\n    }, [username, homeAccountId, localAccountId]);\r\n    const isAuthenticated = useIsAuthenticated(accountIdentifier);\r\n\r\n    if (!isAuthenticated && context.inProgress !== InteractionStatus.Startup && context.inProgress !== InteractionStatus.HandleRedirect) {\r\n        return (\r\n            <React.Fragment>\r\n                {getChildrenOrFunction(children, context)}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n    return null;\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { PopupRequest, RedirectRequest, SsoSilentRequest, InteractionType, AuthenticationResult, AuthError, EventMessage, EventType, InteractionStatus } from \"@azure/msal-browser\";\r\nimport { useIsAuthenticated } from \"./useIsAuthenticated\";\r\nimport { AccountIdentifiers } from \"../types/AccountIdentifiers\";\r\nimport { useMsal } from \"./useMsal\";\r\n\r\nexport type MsalAuthenticationResult = {\r\n    login: Function; \r\n    result: AuthenticationResult|null;\r\n    error: AuthError|null;\r\n};\r\n\r\n/**\r\n * Invokes a login call if a user is not currently signed-in. Failed logins can be retried using the login callback returned.\r\n * Optionally provide a request object to be used in the login call.\r\n * Optionally provide a specific user that should be logged in.\r\n * @param interactionType \r\n * @param authenticationRequest \r\n * @param accountIdentifiers \r\n */\r\nexport function useMsalAuthentication(\r\n    interactionType: InteractionType, \r\n    authenticationRequest?: PopupRequest|RedirectRequest|SsoSilentRequest, \r\n    accountIdentifiers?: AccountIdentifiers\r\n): MsalAuthenticationResult {\r\n    const { instance, inProgress, logger } = useMsal();\r\n    const isAuthenticated = useIsAuthenticated(accountIdentifiers);\r\n    const [[result, error], setResponse] = useState<[AuthenticationResult|null, AuthError|null]>([null, null]);\r\n    const [hasBeenCalled, setHasBeenCalled] = useState<boolean>(false);\r\n\r\n    const login = useCallback(async (callbackInteractionType?: InteractionType, callbackRequest?: PopupRequest|RedirectRequest|SsoSilentRequest): Promise<AuthenticationResult|null> => {\r\n        const loginType = callbackInteractionType || interactionType;\r\n        const loginRequest = callbackRequest || authenticationRequest;\r\n        switch (loginType) {\r\n            case InteractionType.Popup:\r\n                logger.verbose(\"useMsalAuthentication - Calling loginPopup\");\r\n                return instance.loginPopup(loginRequest as PopupRequest);\r\n            case InteractionType.Redirect:\r\n                // This promise is not expected to resolve due to full frame redirect\r\n                logger.verbose(\"useMsalAuthentication - Calling loginRedirect\");\r\n                return instance.loginRedirect(loginRequest as RedirectRequest).then(null);\r\n            case InteractionType.Silent:\r\n                logger.verbose(\"useMsalAuthentication - Calling ssoSilent\");\r\n                return instance.ssoSilent(loginRequest as SsoSilentRequest);\r\n            default:\r\n                throw \"Invalid interaction type provided.\";\r\n        }\r\n    }, [instance, interactionType, authenticationRequest, logger]);\r\n\r\n    useEffect(() => {\r\n        const callbackId = instance.addEventCallback((message: EventMessage) => {\r\n            switch(message.eventType) {\r\n                case EventType.LOGIN_SUCCESS:\r\n                case EventType.SSO_SILENT_SUCCESS:\r\n                    if (message.payload) {\r\n                        setResponse([message.payload as AuthenticationResult, null]);\r\n                    }\r\n                    break;\r\n                case EventType.LOGIN_FAILURE:\r\n                case EventType.SSO_SILENT_FAILURE:\r\n                    if (message.error) {\r\n                        setResponse([null, message.error as AuthError]);\r\n                    }\r\n                    break;\r\n            }\r\n        });\r\n        logger.verbose(`useMsalAuthentication - Registered event callback with id: ${callbackId}`);\r\n\r\n        return () => {\r\n            if (callbackId) {\r\n                logger.verbose(`useMsalAuthentication - Removing event callback ${callbackId}`);\r\n                instance.removeEventCallback(callbackId);\r\n            }\r\n        };\r\n    }, [instance, logger]);\r\n\r\n    useEffect(() => {\r\n        if (!hasBeenCalled && !error && !isAuthenticated && inProgress === InteractionStatus.None) {\r\n            logger.info(\"useMsalAuthentication - No user is authenticated, attempting to login\");\r\n            // Ensure login is only called one time from within this hook, any subsequent login attempts should use the callback returned\r\n            setHasBeenCalled(true);\r\n            login().catch(() => {\r\n                // Errors are handled by the event handler above\r\n                return;\r\n            });\r\n        }\r\n    }, [isAuthenticated, inProgress, error, hasBeenCalled, login, logger]);\r\n\r\n    return { login, result, error };\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport React, { PropsWithChildren, useMemo } from \"react\";\r\nimport { AccountIdentifiers } from \"../types/AccountIdentifiers\";\r\nimport { getChildrenOrFunction } from \"../utils/utilities\";\r\nimport { useMsal } from \"../hooks/useMsal\";\r\nimport { MsalAuthenticationResult, useMsalAuthentication } from \"../hooks/useMsalAuthentication\";\r\nimport { useIsAuthenticated } from \"../hooks/useIsAuthenticated\";\r\nimport { InteractionType, PopupRequest, RedirectRequest, SsoSilentRequest, InteractionStatus } from \"@azure/msal-browser\";\r\nimport { IMsalContext } from \"../MsalContext\";\r\n\r\nexport type MsalAuthenticationProps = PropsWithChildren<AccountIdentifiers & {\r\n    interactionType: InteractionType;\r\n    authenticationRequest?: PopupRequest|RedirectRequest|SsoSilentRequest;\r\n    loadingComponent?: React.ElementType<IMsalContext>;\r\n    errorComponent?: React.ElementType<MsalAuthenticationResult>;\r\n}>;\r\n\r\n/**\r\n * Attempts to authenticate user if not already authenticated, then renders child components\r\n * @param props\r\n */\r\nexport function MsalAuthenticationTemplate({ \r\n    interactionType, \r\n    username, \r\n    homeAccountId, \r\n    localAccountId,\r\n    authenticationRequest, \r\n    loadingComponent: LoadingComponent,\r\n    errorComponent: ErrorComponent,\r\n    children \r\n}: MsalAuthenticationProps): React.ReactElement|null {\r\n    const accountIdentifier: AccountIdentifiers = useMemo(() => {\r\n        return {\r\n            username,\r\n            homeAccountId,\r\n            localAccountId\r\n        };\r\n    }, [username, homeAccountId, localAccountId]);\r\n    const context = useMsal();\r\n    const msalAuthResult = useMsalAuthentication(interactionType, authenticationRequest, accountIdentifier);\r\n    const isAuthenticated = useIsAuthenticated(accountIdentifier);\r\n\r\n    if (msalAuthResult.error && context.inProgress === InteractionStatus.None) {\r\n        if (!!ErrorComponent) {\r\n            return <ErrorComponent {...msalAuthResult} />;\r\n        }\r\n\r\n        throw msalAuthResult.error;\r\n    }\r\n    \r\n    if (isAuthenticated) {\r\n        return (\r\n            <React.Fragment>\r\n                {getChildrenOrFunction(children, msalAuthResult)}\r\n            </React.Fragment>\r\n        );\r\n    } \r\n    \r\n    if (!!LoadingComponent && context.inProgress !== InteractionStatus.None) {\r\n        return <LoadingComponent {...context} />;\r\n    }\r\n\r\n    return null;\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport React from \"react\";\r\nimport { IMsalContext } from \"../MsalContext\";\r\nimport { useMsal } from \"../hooks/useMsal\";\r\nimport { Subtract } from \"../utils/utilities\";\r\n\r\nexport type WithMsalProps = {\r\n    msalContext: IMsalContext;\r\n};\r\n\r\n/**\r\n * Higher order component wraps provided component with msal by injecting msal context values into the component's props \r\n * @param Component \r\n */\r\nexport const withMsal = <P extends WithMsalProps>(Component: React.ComponentType<P>): React.FunctionComponent<Subtract<P,WithMsalProps>> => {\r\n    const ComponentWithMsal: React.FunctionComponent<Subtract<P,WithMsalProps>> = props => {\r\n        const msal = useMsal();\r\n        return <Component {...(props as P)} msalContext={msal} />;\r\n    };\r\n\r\n    const componentName =\r\n        Component.displayName || Component.name || \"Component\";\r\n    ComponentWithMsal.displayName = `withMsal(${componentName})`;\r\n\r\n    return ComponentWithMsal;\r\n};\r\n"],"names":["defaultMsalContext","instance","stubbedPublicClientApplication","inProgress","InteractionStatus","None","accounts","logger","Logger","MsalContext","React","MsalConsumer","Consumer","getChildrenOrFunction","children","args","accountArraysAreEqual","arrayA","arrayB","length","comparisonArray","every","elementA","elementB","shift","homeAccountId","localAccountId","username","name","version","MsalProvider","useEffect","initializeWrapperLibrary","WrapperSKU","useMemo","getLogger","clone","SKU","setAccounts","useState","setInProgress","Startup","inProgressRef","useRef","callbackId","addEventCallback","message","eventType","EventType","ACCOUNT_ADDED","ACCOUNT_REMOVED","LOGIN_SUCCESS","SSO_SILENT_SUCCESS","HANDLE_REDIRECT_END","LOGIN_FAILURE","SSO_SILENT_FAILURE","LOGOUT_END","ACQUIRE_TOKEN_SUCCESS","ACQUIRE_TOKEN_FAILURE","currentAccounts","getAllAccounts","info","verbose","removeEventCallback","status","EventMessageUtils","getInteractionStatusFromEvent","current","handleRedirectPromise","catch","contextValue","Provider","value","useMsal","useContext","getAccount","accountIdentifiers","allAccounts","matchedAccounts","filter","accountObj","toLowerCase","useAccount","initialStateValue","account","setAccount","currentAccount","AccountEntity","accountInfoIsEqual","isAuthenticated","matchAccount","useIsAuthenticated","hasAuthenticated","setHasAuthenticated","AuthenticatedTemplate","context","accountIdentifier","Fragment","UnauthenticatedTemplate","HandleRedirect","useMsalAuthentication","interactionType","authenticationRequest","result","error","setResponse","hasBeenCalled","setHasBeenCalled","login","useCallback","callbackInteractionType","callbackRequest","loginType","loginRequest","InteractionType","Popup","loginPopup","Redirect","loginRedirect","then","Silent","ssoSilent","payload","MsalAuthenticationTemplate","loadingComponent","LoadingComponent","errorComponent","ErrorComponent","msalAuthResult","withMsal","Component","ComponentWithMsal","props","msal","msalContext","componentName","displayName"],"mappings":"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"}